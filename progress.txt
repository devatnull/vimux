## Codebase Patterns
- Simulator types live in src/lib/simulator/types.ts
- Factory functions for default state in src/lib/simulator/constants.ts
- Export all from index.ts for clean imports
- Use `npm run build` for typecheck (includes TypeScript checking)
- Pre-existing lint errors in page.tsx and components exist; ignore them

---

## 2026-01-14 - US-001
Thread: http://localhost:8317/threads/T-019bbb9c-dc27-70b1-8eb4-21ec50e69963
- Implemented comprehensive type definitions for tmux and vim state
- Created src/lib/simulator/types.ts with:
  - VimMode, VimOperator, SearchDirection, FindMotion types
  - VimBuffer with marks, folds, undo/redo stacks, cursor position
  - VimState with registers (named, numbered, special), macros, jumplist, changelist, search state
  - TmuxPane with dimensions, content, scrollback, zoom state
  - TmuxWindow with panes, layout types
  - TmuxSession with windows, attached state
  - TmuxState with copy mode, prefix state, paste buffer
  - SimulatorState combining tmux and vim
- Created src/lib/simulator/constants.ts with:
  - Default settings (VimSettings)
  - Factory functions for buffers, panes, windows, sessions
  - Bracket pairs, word separators, special keys mappings
- Created src/lib/simulator/index.ts for exports
- Files changed: 3 new files in src/lib/simulator/
- **Learnings for future iterations:**
  - Existing types.ts in src/lib/ has older/simpler definitions - new simulator types are more comprehensive
  - Use createDefaultSimulatorState() to initialize full state
  - VimRegisterContent has type property ("char" | "line" | "block") for paste behavior
---

## 2026-01-14 - US-002
Thread: http://localhost:8317/threads/T-019bbba3-31c9-71e4-9948-37966264ac64
- Implemented complete vim motion engine for basic motions
- Created src/lib/simulator/vim/motions.ts with:
  - h/j/k/l character and line movement with boundary checking
  - w/W word/WORD forward motions (word = alphanumeric, WORD = whitespace-delimited)
  - b/B word/WORD backward motions
  - e/E end of word/WORD motions
  - 0/^/$ line position motions (start, first non-whitespace, end)
  - gg/G go to line motions (with optional count)
  - {/} paragraph motions (blank line separated)
  - f/F/t/T character find motions (forward/backward, on/before)
  - ;/, repeat last find motion (same/reverse direction)
  - All motions support count prefix
- Created src/lib/simulator/vim/index.ts for exports
- Updated src/lib/simulator/index.ts to export vim module
- Files changed: 3 files
- **Learnings for future iterations:**
  - Motion functions return MotionResult with optional linewise/inclusive flags for operator integration
  - lastFindMotion state tracks f/F/t/T for ; and , repetition
  - Word boundaries use WORD_SEPARATORS constant from constants.ts
  - executeMotion() is the main entry point for applying motions with count support
---
